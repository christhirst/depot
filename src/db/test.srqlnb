[{"kind":2,"language":"surrealql","value":"\n\n\nDEFINE INDEX symIndex ON TABLE stock COLUMNS symbol UNIQUE;\nINFO FOR TABLE stock;\n\nCREATE stock SET name = 'BritishAmT', wkn = '13424', isin = '222224', symbol  = 'bat';\nSELECT * FROM stock;\nDELETE stock;\n\nCREATE cash SET currency = 'eur',  amount = 1200, owner = user:testuser1, timestamp = <datetime>'2024-07-16T19:07:30Z';\nCREATE cash SET currency = 'eur', amount = 200.22, owner = user:testuser1, timestamp = <datetime>'2024-07-16T19:07:30Z';\n\nSELECT math::sum(amount) AS sum, currency, owner FROM cash WHERE currency = 'eur' AND owner = user:testuser1 GROUP BY currency, owner;\n\n\n\nCREATE share:ee SET name = 'BAT', symbol = 'bat', amount = 1, price = 1.22, owner = user:testuser1, datebuy = '2024-01-01 00:00:00';\n\n\nCREATE share:test SET name = 'BAT', symbol = 'bat', amount = -2, price = 1.22, owner = user:testuser1, datebuy = <datetime>'2023-07-03T07:18:52Z';\n\n\n\nSELECT math::sum(amount) AS sum,symbol FROM share WHERE symbol = 'bat' GROUP BY symbol;\nSELECT math::sum(amount*price) AS sum,symbol FROM share WHERE symbol = 'bat' GROUP BY symbol;\n\n\n\n\nSELECT id FROM share WHERE name = 'British American Tobacco' AND symbol = 'bat' AND amount = 110000 AND price = 22.22 AND owner = 'user:testuser1' AND datebuy = '2023-07-03T07:18:52Z';\n\n\n\n\nreturn (SELECT total from (SELECT math::sum(amount) AS total, currency FROM share  GROUP BY share));\n\nSELECT id FROM share WHERE  symbol = 'bat' AND \n            amount = 110000 AND price = 22.22 AND owner = 'user:testuser1' AND\n             datebuy = '2023-07-03T07:18:52Z';\n\nSELECT * FROM cash;\n\nDELETE share;\nSELECT * FROM share;\n\nSELECT math::sum(amount*price) AS sum, symbol FROM share WHERE symbol = 'bat' GROUP BY symbol;\n\n\nSELECT price, amount  FROM share WHERE symbol = 'bat';\n\nSELECT * FROM user;\nSELECT * FROM cash;\n\nSELECT * FROM cash WHERE 'eur' INSIDE  currency;\nSELECT * FROM cash WHERE owner = 'user:testuser1' AND  'eur' INSIDE currency ;\n\nSELECT name AS user_name, address FROM user;\n\nUPDATE user:testuser1 SET name = 'testuser1', mail = 'testuser1@mail';\nUPDATE user:testuser1 SET name = testuser2, mail = testuser1@mail;\n\nDELETE user:testuser1;"}]